{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = require(\"@walletconnect/utils\");\n\nclass EventManager {\n  constructor() {\n    this._eventEmitters = [];\n  }\n\n  subscribe(eventEmitter) {\n    this._eventEmitters.push(eventEmitter);\n  }\n\n  trigger(payload) {\n    let eventEmitters = [];\n    let event;\n\n    if (utils_1.isJsonRpcRequest(payload)) {\n      event = payload.method;\n    } else if (utils_1.isJsonRpcResponseSuccess(payload) || utils_1.isJsonRpcResponseError(payload)) {\n      event = `response:${payload.id}`;\n    } else if (utils_1.isInternalEvent(payload)) {\n      event = payload.event;\n    } else {\n      event = \"\";\n    }\n\n    if (event) {\n      eventEmitters = this._eventEmitters.filter(eventEmitter => eventEmitter.event === event);\n    }\n\n    if ((!eventEmitters || !eventEmitters.length) && !utils_1.isReservedEvent(event) && !utils_1.isInternalEvent(event)) {\n      eventEmitters = this._eventEmitters.filter(eventEmitter => eventEmitter.event === \"call_request\");\n    }\n\n    eventEmitters.forEach(eventEmitter => {\n      if (utils_1.isJsonRpcResponseError(payload)) {\n        const error = new Error(payload.error.message);\n        eventEmitter.callback(error, null);\n      } else {\n        eventEmitter.callback(null, payload);\n      }\n    });\n  }\n\n}\n\nexports.default = EventManager;","map":null,"metadata":{},"sourceType":"script"}